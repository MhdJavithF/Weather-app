<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover-min.css" integrity="sha512-csw0Ma4oXCAgd/d4nTcpoEoz4nYvvnk21a8VA2h2dzhPAvjbUIK6V3si7/g/HehwdunqqW18RwCJKpD7rL67Xg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section class="wrapper">
        <div class="banner hvr-float-shadow">
            <div class="city">City</div>
            <div class="temp">0 C</div>
            <div class="weather-condition">
                <img src="./assets/sun.png" height="80px" width="80px" alt="icon">
                <p>Condition</p>
            </div>
            <div class="time">Time-Date</div>
            <div class="banner-bottom">
                <div class="humidity">
                    <i class="fa-solid fa-droplet"></i>
                    <span>Humidity</span>
                    <div class="hum-val" style="font-weight: 600;">0%</div>
            </div>
            <div class="cloud">
                    <i class="fa-solid fa-cloud"></i>
                    <span>Cloudy</span>
                    <div class="cloudy" style="font-weight: 600;">0%</div>
            </div>
        </div>
    </div>
    </section>
    <footer>
        <div class="search-bar">
            <div class="search-in">
                <input type="text" placeholder="Search...">
                <div class="search-icon">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </div>
            </div>
        </div>
        <div class="me">
            © 2024 Mohamed Javith,
            <a href="https://www.linkedin.com/in/mhd-javithf/" target="_blank">
                <i class="fa-brands fa-linkedin linkedin"></i>
            </a>

            <a href="https://github.com/MhdJavithF" target="_blank">
                <i class="fa-brands fa-github github"></i>
            </a>
        </div>
    </footer>
    <script>
        const inputRef = document.querySelector('input[type="text"');
        const hitRef = document.querySelector('.search-icon');
        const cityRef = document.querySelector('.city');
        const tempRef = document.querySelector('.temp');
        const imgRef = document.querySelector('.weather-condition img');
        const conditionRef = document.querySelector('.weather-condition p');
        const timeRef = document.querySelector('.time');
        const humidRef = document.querySelector('.humidity .hum-val');
        const cloudRef = document.querySelector('.cloud .cloudy');
        const backgroundRef = document.querySelector('body');
        const meRef = document.querySelector('.me');
        
        hitRef.addEventListener('click', function(event){
            console.log(inputRef.value);
            fetchData(inputRef.value);
        });
        
        inputRef.addEventListener('keypress', function(event){
            if(event.key === 'Enter'){
                console.log(inputRef.value);
                hitRef.click();
            }
        });
        
        function fetchData(location){
            fetch(`https://api.weatherapi.com/v1/current.json?key=2d6f9e6e554e4a02a17182421240301&q=${location}&aqi=no`)
                .then(res => res.json())
                .then(data => getDetails(data))
                .catch(function(e){
                    console.log(e);
                });
        }
        
        function getDetails(data){
            const city = data.location.name;
            const temp = data.current.temp_c;
            const weatherIcon = data.current.condition.icon;
            const condition = data.current.condition.text;
            const time = data.current.last_updated;
            const humid = data.current.humidity;
            const cloudy = data.current.cloud;
        
            cityRef.innerText = city;
            tempRef.innerText = temp + " °C";
            imgRef.src = weatherIcon;
            conditionRef.innerText = condition;
            timeRef.innerText = time;
            humidRef.innerText = humid + " %";
            cloudRef.innerText = cloudy+ " %";
        
            if(data.current.is_day === 1){
                backgroundRef.style.backgroundImage='url(./assets/morning.jpg)';
                meRef.style.color='black';
            }
            else{
                backgroundRef.style.backgroundImage='url(./assets/night.jpg)';
            }
        }
    </script>
</body>
</html>
